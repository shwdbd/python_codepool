# Python设计模式笔记

所谓设计模式（Design Pattern）者，当年四人帮经验之共享而。至高推之，达芬奇师傅的经验教授耳。关键是运用之人，如达芬奇，提交是的艺术，而非技艺。

本文用Python实现了常用的设计模式，一遍熟悉Python之语法，一遍复习当年学习的设计模式。

DesignPattern分为几类：

- 创建型模式
- 结构型模式
- 行为型模式

## 一、创建型模式

### 1. Factory模式

#### 1.1 简单工厂

特征：一个create函数，用参数决定返回对象类型

优点：屏蔽了具体的构造过程

缺点：增加一种产品，就要改一次代码

代码：factory_simple.py

#### 1.2 工厂方法

特征：1个抽象产品，N个具体产品；1个抽象工厂，N个具体工厂；具体工厂，返回具体对象。

优点：

- 如果产品的构造函数很复杂，可以在工厂中隐藏这种复杂的构造逻辑
- 多一个产品，不用改工厂代码

缺点：多一种具体产品，就要多写一个具体工厂类。

代码：factory.py

#### 1.3 抽象工厂

特征：同时构建一套组件，常常组件之间构造有顺序要求

优点：

- 每个工厂创造一套对象，形成系列；
- 产品之间一致性

缺点：

- 结构复杂；
- 不能适应变化。如创建的产品，结构发生改变（如手机新增一个组件：摄像头）则需要大改程序结构；
- 近年来，实际中很少使用。

代码：factory_abstract.py 【比较复杂，尚未实现】

### 2. Builder模式

与抽象工厂方法类似，1种产品有1个Builder器来组装产品。Diector来负责组装的调用顺序。

特征：

优点：

1. 适用于创建复杂对象
2. 适合一步步构造一个对象，抽象工厂适用于构造一系列对象；

代码：builder.py

### 3. 原型模式

### 4. 单例模式

## 二、结构型模式

### 1. 适配器

目标：原本不兼容的接口一起工作

实现上有：

类适配器（多态继承）

对象适配器

客户端必须知道调用某个适配器

### 2. 桥模式

两个维度分离，使其可以独立变化

两个维度分开建模，相互调用。

### 3. 组合模式

适用场景：树形结构，希望对外适用统一的方法

主要组件：

- 抽象组件
- 叶子（最末端的节点，不能有类继承它）
- 复合组件
- 客户端

Demo: 点、线、图形、

### 4. 外观模式

目标：封装子系统操作，client不用具体去操作子系统的代码

==> 数据处理的run函数，解除了各部分操作的耦合

## 三、行为型模式

### 1. 代理模式

有虚代理，权限代理两种用途
